---
name: getTripPatterns
menu: Travel
route: /travel/getTripPatterns
---

# getTripPatterns

```typescript
(params: GetTripPatternsParams, overrideConfig?: OverrideConfig) => Promise<{ tripPatterns: Array<TripPattern>, metadata?: Metadata }>
```

Types: [TripPattern](flow-types/TripPattern.js)
Types: [Metadata](types/Metadata.ts)

`getTripPatterns` is for searching for itineraries for a trip from some location to a destination at a given time. The method takes one argument `query`, which is an object with search parameters.

If you are going to do a huge amount of different searches at the same time, consider using our [`throttler`](/utils/throttler) utility.

## Parameters

### params (`GetTripPatternsParams`)
An object of search parameters.

| Key                         | Type               | Default   | Description |
|:----------------------------|:-------------------|:----------|:------------|
| `from`                      | `Location`         |          | The location to search for travels from. |
| `to`                        | `Location`         |          | The destination location to search for travels to. |
| `allowBikeRental`           | `boolean`          | `false` | Is bike rental allowed? |
| `arriveBy`                  | `boolean`          | `false` | Depart by `searchDate`, or arrive by `searchDate` |
| `limit`                     | `number`           | `5`      | Limit result to this number of trip patterns |
| `maxPreTransitWalkDistance` | `number`           | `Number.MAX_VALUE` | Max walk distance for access/egress legs. |
| `modes`                     | `Modes`            | See section below | modes of transport to include in trip |
| `searchDate`                | `Date`             | | When to calculate patterns |
| `useFlex`                   | `boolean`          | `false`  | Whether to allow flexible search results or not |
| `walkSpeed`                 | `number`           | `1.3`    | The walk speed to use in searches in meters per second |
| `transferSlack`             | `number`           | `120`    | An expected transfer time (in seconds) that specifies the amount of time that must pass between exiting one public transport vehicle and boarding another. This time is in addition to time it might take to walk between stops. |
| `wheelchairAccessible`      | `boolean`          | `false`  | Include only stops which are wheelchair accessible |
| `banned`                    | `InputBanned`      |          | Parameters for indicating authorities, lines or quays not be used in the trip patterns  |
| `whiteListed`               | `InputWhitelisted` |          | Parameters for indicating the only authorities, lines or quays to be used in the trip patterns |

#### Modes

```typescript
interface Modes {
    accessMode?: StreetMode | null
    egressMode?: StreetMode | null
    directMode?: StreetMode | null
    transportMode?: TransportMode[]
}
```

| Key             | Description |
|:----------------|:------------|
| `accessMode`    | The mode used to get from the origin to the access stops in the transit network the transit network (first-mile). If the element is not present or null, only transit that can be immediately boarded from the origin will be used. |
| `egressMode`    | The mode used to get from the egress stops in the transit network tothe destination (last-mile). If the element is not present or null, only transit that can immediately arrive at the origin will be used. |
| `directMode`    | The mode used to get from the origin to the destination directly, without using the transit network. If the element is not present or null, direct travel without using transit will be disallowed. |
| `transportMode` | The allowed modes for the transit part of the trip. Use an empty list to disallow transit for this search. If the element is not present, it will default to all transport modes. |

Default `modes` parameter value:

```typescript
const DEFAULT_MODES: Modes = {
    accessMode: StreetMode.FOOT,
    egressMode: StreetMode.FOOT,
    directMode: null,
    transportMode: [BUS, TRAM, RAIL, METRO, WATER, AIR],
}
```

#### InputBanned and InputWhitelisted types

```typescript
interface InputBanned {
    lines?: Array<string>;
    authorities?: Array<string>;
    organisations?: Array<string>;
    quays?: Array<string>;
    quaysHard?: Array<string>;
    serviceJourneys?: Array<string>;
}

interface InputWhiteListed {
    lines?: Array<string>;
    authorities?: Array<string>;
    organisations?: Array<string>;
}
```

### overrideConfig (`OverrideConfig`) [Optional]

You can override the default service config on invocation if necessary.

```typescript
interface OverrideConfig {
    clientName?: string;
    hosts?: {
        journeyPlanner?: string;
        geocoder?: string;
        nsr?: string;
    };
    headers?: {[key: string]: string};
}
```

## Example

```javascript
import createEnturService from '@entur/sdk'
// or: const createEnturService = require('@entur/sdk').default

const service = createEnturService({
    clientName: 'awesomecompany-awesomeapp'
})

async function getTripPatterns() {
    try {
        const tripResults = await service.getTripPatterns(
            {
                from: {
                    name: 'Ryllikvegen, Lillehammer',
                    coordinates: {
                        latitude: 61.102848368937416,
                        longitude: 10.51613308426234
                    },
                },
                to: {
                    place: 'NSR:StopPlace:337',
                    name: 'Oslo S, Oslo'
                },
                searchDate: new Date(),
            }
        })

        const { tripPatterns, metadata } = tripResults

        if (tripPatterns.length === 0 && metadata?.nextDateTime) {
            // Maybe make another search with nextDateTime?
        }

        return tripPatterns
    } catch (error) {
        console.error(error)
        return []
    }
})
```
